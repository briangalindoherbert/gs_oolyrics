## musiclyrics_nlp
This code repository came from a side project I started building in November 2021.  My initial scope was simply to automate the creation of a corpus of music lyrics and apply some basic nlp tasks to it, such as pulling up lyrics for a given artist or song and doing stats on word frequency and inverse document frequency.  
    Next, I built some classes of objects to serve as virtual containers for musical genres and their associated artists, albums, tracks and track registries (unique tags for each artist song along with url for song title and lyrics).  These classes were designed with __iter__ methods which used python generators and iterators to stream the lyrics owned by an instance of the object.
    With this framework built- the lyrics corpus creation as well as data structures to hold various artist and lyrics data - I built scripts and methods to apply the lyrics for nlp tasks.  First I extended the class definitions to do analysis, statistics, and plotting on their contents- such as creating Dictionary and Bag of Words objects for lyrics, calculating term frequency and inverse document frequency, and plotting histograms for the vocabulary of an artist or genre.  More advanced nlp included applying word2vec, doc2vec, LDA topic modeling, and phrases analysis.

1. functions to interface with lyricgenius api to GET lyrics from Internet for an artist, this builds a corpus of lyrics - each lyric file is named with the prefix of the genre (ex. 'rap', 'rock', 'country', 'pop') the artist name with spaces stripped out, and extension ".lyr", as in "pop_Maroon5.lyr".
2. In addition to building a corpus of lyrics files as described above, I've added functions to create a lyrics registry to support creating TaggedDocuments, in parralel to the lyric corpus building, it creates a json file for each genre, with list of tag: song name pairs for each artist's tracks in the corpus.  This index makes it easy to pull a song and its lyrics when doing topic modeling like looking for the most similar tracks to a line of input text.
3. cleaning, formatting and tokenization:  I have found it is best to try to leave corpus text in close to its original state, and perform cleaning, parsing, and formatting as a 'just-in-time' process for the nlp task at hand.  Any wrangling done to text files must not harm the ability to perform any downstream nlp tasks- what is needed for word embedding may be different from what is needed for sentiment analysis, so better to do minimal scrubbing to corpus files and simply apply filters inline with nlp tasks as they are called.  In gs_Gensim.py, I have a function called line_cleaning that I call from the lyrics objects I use as generators-iterators to stream lyrics, line cleaning takes care of most of my cleaning-formatting-tokenization needs except for lemmatization, which the object calls right after line_cleaning if it is needed.
4. Above is a long winded explanation of my design approach to text processing for nlp, but it is why the only modification I apply to lyrics files after I write them is to standardize an 'end-of'track' marker between songs and to strip out blank lines.  The method filter_for_end_of_track gets called right after get_lyrics to do that processing.
5. uses gensim word2vec and Similarity for training of corpora to generate KeyedVector model.  Creating word embeddings for a genre or for the entire corpora of music lyrics allows interesting findings with similarities and differences of language use by artists, in genres, or with music in general.
6. used gensim doc2vec to do unsupervised training, defining each song in the applicable genre as a TaggedDocument.  This allows some cool stuff with looking at similarities and characteristics of different artists, genres, and music tracks.  
7. uses gensim.models.Ldamodel and gensim.corpora.Dictionary for LDA topic modeling
  
I kept expanding and enhancing the libraries and methods and classes I wrote to manage it all.  I had to do a lot of refactoring as the scope of my project 'exploded', so I simply replaced core .py files in the app in the last couple updates.  The structure is stable enough now that I can start to branch updates instead of doing wholesale code replacement.

I hope you enjoy music as much as I do and find other useful ways to apply this corpus and the tools to lyrics!
Brian

